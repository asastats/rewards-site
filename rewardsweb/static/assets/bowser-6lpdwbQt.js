import{p as U,r as Pr,c as dr,B as ft,d as Q,e as qr,g as Dt}from"../js/bundle.js";var se={},x={},Ht;function fr(){if(Ht)return x;Ht=1,Object.defineProperty(x,"__esModule",{value:!0}),x.getLocalStorage=x.getLocalStorageOrThrow=x.getCrypto=x.getCryptoOrThrow=x.getLocation=x.getLocationOrThrow=x.getNavigator=x.getNavigatorOrThrow=x.getDocument=x.getDocumentOrThrow=x.getFromWindowOrThrow=x.getFromWindow=void 0;function r(R){let I;return typeof window<"u"&&typeof window[R]<"u"&&(I=window[R]),I}x.getFromWindow=r;function e(R){const I=r(R);if(!I)throw new Error(`${R} is not defined in Window`);return I}x.getFromWindowOrThrow=e;function t(){return e("document")}x.getDocumentOrThrow=t;function i(){return r("document")}x.getDocument=i;function s(){return e("navigator")}x.getNavigatorOrThrow=s;function o(){return r("navigator")}x.getNavigator=o;function a(){return e("location")}x.getLocationOrThrow=a;function m(){return r("location")}x.getLocation=m;function l(){return e("crypto")}x.getCryptoOrThrow=l;function g(){return r("crypto")}x.getCrypto=g;function M(){return e("localStorage")}x.getLocalStorageOrThrow=M;function A(){return r("localStorage")}return x.getLocalStorage=A,x}var Vt;function jr(){if(Vt)return se;Vt=1,Object.defineProperty(se,"__esModule",{value:!0}),se.getWindowMetadata=void 0;const r=fr();function e(){let t,i;try{t=r.getDocumentOrThrow(),i=r.getLocationOrThrow()}catch{return null}function s(){const I=t.getElementsByTagName("link"),C=[];for(let j=0;j<I.length;j++){const u=I[j],h=u.getAttribute("rel");if(h&&h.toLowerCase().indexOf("icon")>-1){const b=u.getAttribute("href");if(b)if(b.toLowerCase().indexOf("https:")===-1&&b.toLowerCase().indexOf("http:")===-1&&b.indexOf("//")!==0){let y=i.protocol+"//"+i.host;if(b.indexOf("/")===0)y+=b;else{const k=i.pathname.split("/");k.pop();const F=k.join("/");y+=F+"/"+b}C.push(y)}else if(b.indexOf("//")===0){const y=i.protocol+b;C.push(y)}else C.push(b)}}return C}function o(...I){const C=t.getElementsByTagName("meta");for(let j=0;j<C.length;j++){const u=C[j],h=["itemprop","property","name"].map(b=>u.getAttribute(b)).filter(b=>b?I.includes(b):!1);if(h.length&&h){const b=u.getAttribute("content");if(b)return b}}return""}function a(){let I=o("name","og:site_name","og:title","twitter:title");return I||(I=t.title),I}function m(){return o("description","og:description","twitter:description","keywords")}const l=a(),g=m(),M=i.origin,A=s();return{description:g,url:M,icons:A,name:l}}return se.getWindowMetadata=e,se}var Lr=jr(),Ft=fr(),Wr=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),s=0,e=0;e<t;e++)for(var o=arguments[e],a=0,m=o.length;a<m;a++,s++)i[s]=o[a];return i},Ur=(function(){function r(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return r})(),Dr=(function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=U.platform}return r})(),Hr=(function(){function r(e,t,i,s){this.name=e,this.version=t,this.os=i,this.bot=s,this.type="bot-device"}return r})(),Vr=(function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r})(),$r=(function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r})(),Gr=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Jr=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,$t=3,zr=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",Gr]],Gt=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Kr(r){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new $r:typeof navigator<"u"?Xr(navigator.userAgent):Zr()}function Qr(r){return r!==""&&zr.reduce(function(e,t){var i=t[0],s=t[1];if(e)return e;var o=s.exec(r);return!!o&&[i,o]},!1)}function Xr(r){var e=Qr(r);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new Vr;var s=i[1]&&i[1].split(/[._]/).slice(0,3);s?s.length<$t&&(s=Wr(s,en($t-s.length))):s=[];var o=s.join("."),a=Yr(r),m=Jr.exec(r);return m&&m[1]?new Hr(t,o,a,m[1]):new Ur(t,o,a)}function Yr(r){for(var e=0,t=Gt.length;e<t;e++){var i=Gt[e],s=i[0],o=i[1],a=o.exec(r);if(a)return s}return null}function Zr(){var r=typeof U<"u"&&U.version;return r?new Dr(U.version.slice(1)):null}function en(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}function Bt(r){return Kr()}function Nt(){const r=Bt();return r&&r.os?r.os:void 0}function tn(){const r=Nt();return r?r.toLowerCase().includes("android"):!1}function rn(){const r=Nt();return r?r.toLowerCase().includes("ios")||r.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function nn(){return Nt()?tn()||rn():!1}function sn(){const r=Bt();return r&&r.name?r.name.toLowerCase()==="node":!1}function on(){return!sn()&&!!an()}const an=Ft.getNavigator,cn=Ft.getLocation,Pt=Ft.getLocalStorage;function Jt(){return Lr.getWindowMetadata()}function un(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return JSON.parse(r)}catch{return r}}function dn(r){return typeof r=="string"?r:JSON.stringify(r)}const fn=un,hn=dn;function ln(r,e){const t=hn(e),i=Pt();i&&i.setItem(r,t)}function hr(r){let e=null,t=null;const i=Pt();return i&&(t=i.getItem(r)),e=t&&fn(t),e}function lr(r){const e=Pt();e&&e.removeItem(r)}const zt="WALLETCONNECT_DEEPLINK_CHOICE",pn=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],pr=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"];var gn=Pr();const mn=dr(gn);var bt,Kt;function gr(){if(Kt)return bt;Kt=1,bt=t,t.strict=i,t.loose=s;var r=Object.prototype.toString,e={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function t(o){return i(o)||s(o)}function i(o){return o instanceof Int8Array||o instanceof Int16Array||o instanceof Int32Array||o instanceof Uint8Array||o instanceof Uint8ClampedArray||o instanceof Uint16Array||o instanceof Uint32Array||o instanceof Float32Array||o instanceof Float64Array}function s(o){return e[r.call(o)]}return bt}gr();var yt,Qt;function bn(){if(Qt)return yt;Qt=1;var r=gr().strict;return yt=function(t){if(r(t)){var i=ft.from(t.buffer);return t.byteLength!==t.buffer.byteLength&&(i=i.slice(t.byteOffset,t.byteOffset+t.byteLength)),i}else return ft.from(t)},yt}var yn=bn();const _n=dr(yn),mr="hex",br="utf8",lt="0";function ee(r){return new Uint8Array(r)}function yr(r,e=!1){const t=r.toString(mr);return e?te(t):t}function wn(r){return r.toString(br)}function pt(r){return _n(r)}function Y(r,e=!1){return yr(pt(r),e)}function vn(r){return wn(pt(r))}function Sn(r){return ft.from(J(r),mr)}function Z(r){return ee(Sn(r))}function qt(r){return ft.from(r,br)}function On(r){return ee(qt(r))}function Mn(r,e=!1){return yr(qt(r),e)}function kn(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/))}function _r(...r){let e=[];return r.forEach(t=>e=e.concat(Array.from(t))),new Uint8Array([...e])}function Rn(r,e=8){const t=r%e;return t?(r-t)/e*e+e:r}function En(r,e=8,t=lt){return In(r,Rn(r.length,e),t)}function In(r,e,t=lt){return Cn(r,e,!0,t)}function J(r){return r.replace(/^0x/,"")}function te(r){return r.startsWith("0x")?r:`0x${r}`}function wr(r){return r=J(r),r=En(r,2),r&&(r=te(r)),r}function An(r){const e=r.startsWith("0x");return r=J(r),r=r.startsWith(lt)?r.substring(1):r,e?te(r):r}function Cn(r,e,t,i=lt){const s=e-r.length;let o=r;return s>0&&(o=i.repeat(s)+r),o}function It(r){return pt(new Uint8Array(r))}function xn(r,e){return Y(new Uint8Array(r),!1)}function Tn(r){return ee(r).buffer}function Fn(r){return qt(r)}function Bn(r,e){return Mn(r,!0)}function Nn(r){return Z(r).buffer}function vr(r,e){const t=J(wr(new mn(r).toString(16)));return e?t:te(t)}var _t={exports:{}},Xt;function Pn(){return Xt||(Xt=1,(function(r){(function(){var e="input is invalid type",t="finalize already called",i=typeof window=="object",s=i?window:{};s.JS_SHA3_NO_WINDOW&&(i=!1);var o=!i&&typeof self=="object",a=!s.JS_SHA3_NO_NODE_JS&&typeof U=="object"&&U.versions&&U.versions.node;a?s=Q:o&&(s=self);var m=!s.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,l=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",g="0123456789abcdef".split(""),M=[31,7936,2031616,520093696],A=[4,1024,262144,67108864],R=[1,256,65536,16777216],I=[6,1536,393216,100663296],C=[0,8,16,24],j=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],u=[224,256,384,512],h=[128,256],b=["hex","buffer","arrayBuffer","array","digest"],y={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),l&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return typeof n=="object"&&n.buffer&&n.buffer.constructor===ArrayBuffer});for(var k=function(n,d,f){return function(p){return new P(n,d,n).update(p)[f]()}},F=function(n,d,f){return function(p,_){return new P(n,d,_).update(p)[f]()}},E=function(n,d,f){return function(p,_,v,S){return V["cshake"+n].update(p,_,v,S)[f]()}},W=function(n,d,f){return function(p,_,v,S){return V["kmac"+n].update(p,_,v,S)[f]()}},ue=function(n,d,f,p){for(var _=0;_<b.length;++_){var v=b[_];n[v]=d(f,p,v)}return n},Lt=function(n,d){var f=k(n,d,"hex");return f.create=function(){return new P(n,d,n)},f.update=function(p){return f.create().update(p)},ue(f,k,n,d)},Fr=function(n,d){var f=F(n,d,"hex");return f.create=function(p){return new P(n,d,p)},f.update=function(p,_){return f.create(_).update(p)},ue(f,F,n,d)},Br=function(n,d){var f=y[n],p=E(n,d,"hex");return p.create=function(_,v,S){return!v&&!S?V["shake"+n].create(_):new P(n,d,_).bytepad([v,S],f)},p.update=function(_,v,S,w){return p.create(v,S,w).update(_)},ue(p,E,n,d)},Nr=function(n,d){var f=y[n],p=W(n,d,"hex");return p.create=function(_,v,S){return new mt(n,d,v).bytepad(["KMAC",S],f).bytepad([_],f)},p.update=function(_,v,S,w){return p.create(_,S,w).update(v)},ue(p,W,n,d)},Wt=[{name:"keccak",padding:R,bits:u,createMethod:Lt},{name:"sha3",padding:I,bits:u,createMethod:Lt},{name:"shake",padding:M,bits:h,createMethod:Fr},{name:"cshake",padding:A,bits:h,createMethod:Br},{name:"kmac",padding:A,bits:h,createMethod:Nr}],V={},re=[],$=0;$<Wt.length;++$)for(var X=Wt[$],de=X.bits,ne=0;ne<de.length;++ne){var gt=X.name+"_"+de[ne];if(re.push(gt),V[gt]=X.createMethod(de[ne],X.padding),X.name!=="sha3"){var Ut=X.name+de[ne];re.push(Ut),V[Ut]=V[gt]}}function P(n,d,f){this.blocks=[],this.s=[],this.padding=d,this.outputBits=f,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(n<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=f>>5,this.extraBytes=(f&31)>>3;for(var p=0;p<50;++p)this.s[p]=0}P.prototype.update=function(n){if(this.finalized)throw new Error(t);var d,f=typeof n;if(f!=="string"){if(f==="object"){if(n===null)throw new Error(e);if(l&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!l||!ArrayBuffer.isView(n)))throw new Error(e)}else throw new Error(e);d=!0}for(var p=this.blocks,_=this.byteCount,v=n.length,S=this.blockCount,w=0,q=this.s,O,B;w<v;){if(this.reset)for(this.reset=!1,p[0]=this.block,O=1;O<S+1;++O)p[O]=0;if(d)for(O=this.start;w<v&&O<_;++w)p[O>>2]|=n[w]<<C[O++&3];else for(O=this.start;w<v&&O<_;++w)B=n.charCodeAt(w),B<128?p[O>>2]|=B<<C[O++&3]:B<2048?(p[O>>2]|=(192|B>>6)<<C[O++&3],p[O>>2]|=(128|B&63)<<C[O++&3]):B<55296||B>=57344?(p[O>>2]|=(224|B>>12)<<C[O++&3],p[O>>2]|=(128|B>>6&63)<<C[O++&3],p[O>>2]|=(128|B&63)<<C[O++&3]):(B=65536+((B&1023)<<10|n.charCodeAt(++w)&1023),p[O>>2]|=(240|B>>18)<<C[O++&3],p[O>>2]|=(128|B>>12&63)<<C[O++&3],p[O>>2]|=(128|B>>6&63)<<C[O++&3],p[O>>2]|=(128|B&63)<<C[O++&3]);if(this.lastByteIndex=O,O>=_){for(this.start=O-_,this.block=p[S],O=0;O<S;++O)q[O]^=p[O];ie(q),this.reset=!0}else this.start=O}return this},P.prototype.encode=function(n,d){var f=n&255,p=1,_=[f];for(n=n>>8,f=n&255;f>0;)_.unshift(f),n=n>>8,f=n&255,++p;return d?_.push(p):_.unshift(p),this.update(_),_.length},P.prototype.encodeString=function(n){var d,f=typeof n;if(f!=="string"){if(f==="object"){if(n===null)throw new Error(e);if(l&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!l||!ArrayBuffer.isView(n)))throw new Error(e)}else throw new Error(e);d=!0}var p=0,_=n.length;if(d)p=_;else for(var v=0;v<n.length;++v){var S=n.charCodeAt(v);S<128?p+=1:S<2048?p+=2:S<55296||S>=57344?p+=3:(S=65536+((S&1023)<<10|n.charCodeAt(++v)&1023),p+=4)}return p+=this.encode(p*8),this.update(n),p},P.prototype.bytepad=function(n,d){for(var f=this.encode(d),p=0;p<n.length;++p)f+=this.encodeString(n[p]);var _=d-f%d,v=[];return v.length=_,this.update(v),this},P.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,d=this.lastByteIndex,f=this.blockCount,p=this.s;if(n[d>>2]|=this.padding[d&3],this.lastByteIndex===this.byteCount)for(n[0]=n[f],d=1;d<f+1;++d)n[d]=0;for(n[f-1]|=2147483648,d=0;d<f;++d)p[d]^=n[d];ie(p)}},P.prototype.toString=P.prototype.hex=function(){this.finalize();for(var n=this.blockCount,d=this.s,f=this.outputBlocks,p=this.extraBytes,_=0,v=0,S="",w;v<f;){for(_=0;_<n&&v<f;++_,++v)w=d[_],S+=g[w>>4&15]+g[w&15]+g[w>>12&15]+g[w>>8&15]+g[w>>20&15]+g[w>>16&15]+g[w>>28&15]+g[w>>24&15];v%n===0&&(ie(d),_=0)}return p&&(w=d[_],S+=g[w>>4&15]+g[w&15],p>1&&(S+=g[w>>12&15]+g[w>>8&15]),p>2&&(S+=g[w>>20&15]+g[w>>16&15])),S},P.prototype.arrayBuffer=function(){this.finalize();var n=this.blockCount,d=this.s,f=this.outputBlocks,p=this.extraBytes,_=0,v=0,S=this.outputBits>>3,w;p?w=new ArrayBuffer(f+1<<2):w=new ArrayBuffer(S);for(var q=new Uint32Array(w);v<f;){for(_=0;_<n&&v<f;++_,++v)q[v]=d[_];v%n===0&&ie(d)}return p&&(q[_]=d[_],w=w.slice(0,S)),w},P.prototype.buffer=P.prototype.arrayBuffer,P.prototype.digest=P.prototype.array=function(){this.finalize();for(var n=this.blockCount,d=this.s,f=this.outputBlocks,p=this.extraBytes,_=0,v=0,S=[],w,q;v<f;){for(_=0;_<n&&v<f;++_,++v)w=v<<2,q=d[_],S[w]=q&255,S[w+1]=q>>8&255,S[w+2]=q>>16&255,S[w+3]=q>>24&255;v%n===0&&ie(d)}return p&&(w=v<<2,q=d[_],S[w]=q&255,p>1&&(S[w+1]=q>>8&255),p>2&&(S[w+2]=q>>16&255)),S};function mt(n,d,f){P.call(this,n,d,f)}mt.prototype=new P,mt.prototype.finalize=function(){return this.encode(this.outputBits,!0),P.prototype.finalize.call(this)};var ie=function(n){var d,f,p,_,v,S,w,q,O,B,fe,he,le,pe,ge,me,be,ye,_e,we,ve,Se,Oe,Me,ke,Re,Ee,Ie,Ae,Ce,xe,Te,Fe,Be,Ne,Pe,qe,je,Le,We,Ue,De,He,Ve,$e,Ge,Je,ze,Ke,Qe,Xe,Ye,Ze,et,tt,rt,nt,it,st,ot,at,ct,ut;for(p=0;p<48;p+=2)_=n[0]^n[10]^n[20]^n[30]^n[40],v=n[1]^n[11]^n[21]^n[31]^n[41],S=n[2]^n[12]^n[22]^n[32]^n[42],w=n[3]^n[13]^n[23]^n[33]^n[43],q=n[4]^n[14]^n[24]^n[34]^n[44],O=n[5]^n[15]^n[25]^n[35]^n[45],B=n[6]^n[16]^n[26]^n[36]^n[46],fe=n[7]^n[17]^n[27]^n[37]^n[47],he=n[8]^n[18]^n[28]^n[38]^n[48],le=n[9]^n[19]^n[29]^n[39]^n[49],d=he^(S<<1|w>>>31),f=le^(w<<1|S>>>31),n[0]^=d,n[1]^=f,n[10]^=d,n[11]^=f,n[20]^=d,n[21]^=f,n[30]^=d,n[31]^=f,n[40]^=d,n[41]^=f,d=_^(q<<1|O>>>31),f=v^(O<<1|q>>>31),n[2]^=d,n[3]^=f,n[12]^=d,n[13]^=f,n[22]^=d,n[23]^=f,n[32]^=d,n[33]^=f,n[42]^=d,n[43]^=f,d=S^(B<<1|fe>>>31),f=w^(fe<<1|B>>>31),n[4]^=d,n[5]^=f,n[14]^=d,n[15]^=f,n[24]^=d,n[25]^=f,n[34]^=d,n[35]^=f,n[44]^=d,n[45]^=f,d=q^(he<<1|le>>>31),f=O^(le<<1|he>>>31),n[6]^=d,n[7]^=f,n[16]^=d,n[17]^=f,n[26]^=d,n[27]^=f,n[36]^=d,n[37]^=f,n[46]^=d,n[47]^=f,d=B^(_<<1|v>>>31),f=fe^(v<<1|_>>>31),n[8]^=d,n[9]^=f,n[18]^=d,n[19]^=f,n[28]^=d,n[29]^=f,n[38]^=d,n[39]^=f,n[48]^=d,n[49]^=f,pe=n[0],ge=n[1],Ge=n[11]<<4|n[10]>>>28,Je=n[10]<<4|n[11]>>>28,Ie=n[20]<<3|n[21]>>>29,Ae=n[21]<<3|n[20]>>>29,ot=n[31]<<9|n[30]>>>23,at=n[30]<<9|n[31]>>>23,De=n[40]<<18|n[41]>>>14,He=n[41]<<18|n[40]>>>14,Be=n[2]<<1|n[3]>>>31,Ne=n[3]<<1|n[2]>>>31,me=n[13]<<12|n[12]>>>20,be=n[12]<<12|n[13]>>>20,ze=n[22]<<10|n[23]>>>22,Ke=n[23]<<10|n[22]>>>22,Ce=n[33]<<13|n[32]>>>19,xe=n[32]<<13|n[33]>>>19,ct=n[42]<<2|n[43]>>>30,ut=n[43]<<2|n[42]>>>30,et=n[5]<<30|n[4]>>>2,tt=n[4]<<30|n[5]>>>2,Pe=n[14]<<6|n[15]>>>26,qe=n[15]<<6|n[14]>>>26,ye=n[25]<<11|n[24]>>>21,_e=n[24]<<11|n[25]>>>21,Qe=n[34]<<15|n[35]>>>17,Xe=n[35]<<15|n[34]>>>17,Te=n[45]<<29|n[44]>>>3,Fe=n[44]<<29|n[45]>>>3,Me=n[6]<<28|n[7]>>>4,ke=n[7]<<28|n[6]>>>4,rt=n[17]<<23|n[16]>>>9,nt=n[16]<<23|n[17]>>>9,je=n[26]<<25|n[27]>>>7,Le=n[27]<<25|n[26]>>>7,we=n[36]<<21|n[37]>>>11,ve=n[37]<<21|n[36]>>>11,Ye=n[47]<<24|n[46]>>>8,Ze=n[46]<<24|n[47]>>>8,Ve=n[8]<<27|n[9]>>>5,$e=n[9]<<27|n[8]>>>5,Re=n[18]<<20|n[19]>>>12,Ee=n[19]<<20|n[18]>>>12,it=n[29]<<7|n[28]>>>25,st=n[28]<<7|n[29]>>>25,We=n[38]<<8|n[39]>>>24,Ue=n[39]<<8|n[38]>>>24,Se=n[48]<<14|n[49]>>>18,Oe=n[49]<<14|n[48]>>>18,n[0]=pe^~me&ye,n[1]=ge^~be&_e,n[10]=Me^~Re&Ie,n[11]=ke^~Ee&Ae,n[20]=Be^~Pe&je,n[21]=Ne^~qe&Le,n[30]=Ve^~Ge&ze,n[31]=$e^~Je&Ke,n[40]=et^~rt&it,n[41]=tt^~nt&st,n[2]=me^~ye&we,n[3]=be^~_e&ve,n[12]=Re^~Ie&Ce,n[13]=Ee^~Ae&xe,n[22]=Pe^~je&We,n[23]=qe^~Le&Ue,n[32]=Ge^~ze&Qe,n[33]=Je^~Ke&Xe,n[42]=rt^~it&ot,n[43]=nt^~st&at,n[4]=ye^~we&Se,n[5]=_e^~ve&Oe,n[14]=Ie^~Ce&Te,n[15]=Ae^~xe&Fe,n[24]=je^~We&De,n[25]=Le^~Ue&He,n[34]=ze^~Qe&Ye,n[35]=Ke^~Xe&Ze,n[44]=it^~ot&ct,n[45]=st^~at&ut,n[6]=we^~Se&pe,n[7]=ve^~Oe&ge,n[16]=Ce^~Te&Me,n[17]=xe^~Fe&ke,n[26]=We^~De&Be,n[27]=Ue^~He&Ne,n[36]=Qe^~Ye&Ve,n[37]=Xe^~Ze&$e,n[46]=ot^~ct&et,n[47]=at^~ut&tt,n[8]=Se^~pe&me,n[9]=Oe^~ge&be,n[18]=Te^~Me&Re,n[19]=Fe^~ke&Ee,n[28]=De^~Be&Pe,n[29]=He^~Ne&qe,n[38]=Ye^~Ve&Ge,n[39]=Ze^~$e&Je,n[48]=ct^~et&rt,n[49]=ut^~tt&nt,n[0]^=j[p],n[1]^=j[p+1]};if(m)r.exports=V;else for($=0;$<re.length;++$)s[re[$]]=V[re[$]]})()})(_t)),_t.exports}var qn=Pn(),wt={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var At=function(r,e){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},At(r,e)};function jn(r,e){At(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ct=function(){return Ct=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ct.apply(this,arguments)};function Ln(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(t[i[s]]=r[i[s]]);return t}function Wn(r,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var m=r.length-1;m>=0;m--)(a=r[m])&&(o=(s<3?a(o):s>3?a(e,t,o):a(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o}function Un(r,e){return function(t,i){e(t,i,r)}}function Dn(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Hn(r,e,t,i){function s(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function m(M){try{g(i.next(M))}catch(A){a(A)}}function l(M){try{g(i.throw(M))}catch(A){a(A)}}function g(M){M.done?o(M.value):s(M.value).then(m,l)}g((i=i.apply(r,e||[])).next())})}function Vn(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,s,o,a;return a={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function m(g){return function(M){return l([g,M])}}function l(g){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,s&&(o=g[0]&2?s.return:g[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,g[1])).done)return o;switch(s=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,s=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(r,t)}catch(M){g=[6,M],s=0}finally{i=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function $n(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function Gn(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function xt(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sr(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),s,o=[],a;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)o.push(s.value)}catch(m){a={error:m}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return o}function Jn(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Sr(arguments[e]));return r}function zn(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),s=0,e=0;e<t;e++)for(var o=arguments[e],a=0,m=o.length;a<m;a++,s++)i[s]=o[a];return i}function ae(r){return this instanceof ae?(this.v=r,this):new ae(r)}function Kn(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),s,o=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(R){i[R]&&(s[R]=function(I){return new Promise(function(C,j){o.push([R,I,C,j])>1||m(R,I)})})}function m(R,I){try{l(i[R](I))}catch(C){A(o[0][3],C)}}function l(R){R.value instanceof ae?Promise.resolve(R.value.v).then(g,M):A(o[0][2],R)}function g(R){m("next",R)}function M(R){m("throw",R)}function A(R,I){R(I),o.shift(),o.length&&m(o[0][0],o[0][1])}}function Qn(r){var e,t;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,o){e[s]=r[s]?function(a){return(t=!t)?{value:ae(r[s](a)),done:s==="return"}:o?o(a):a}:o}}function Xn(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof xt=="function"?xt(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=r[o]&&function(a){return new Promise(function(m,l){a=r[o](a),s(m,l,a.done,a.value)})}}function s(o,a,m,l){Promise.resolve(l).then(function(g){o({value:g,done:m})},a)}}function Yn(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function Zn(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function ei(r){return r&&r.__esModule?r:{default:r}}function ti(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function ri(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const ni=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Ct},__asyncDelegator:Qn,__asyncGenerator:Kn,__asyncValues:Xn,__await:ae,__awaiter:Hn,__classPrivateFieldGet:ti,__classPrivateFieldSet:ri,__createBinding:$n,__decorate:Wn,__exportStar:Gn,__extends:jn,__generator:Vn,__importDefault:ei,__importStar:Zn,__makeTemplateObject:Yn,__metadata:Dn,__param:Un,__read:Sr,__rest:Ln,__spread:Jn,__spreadArrays:zn,__values:xt},Symbol.toStringTag,{value:"Module"})),ii=qr(ni);var D={},Yt;function si(){if(Yt)return D;Yt=1,Object.defineProperty(D,"__esModule",{value:!0}),D.isBrowserCryptoAvailable=D.getSubtleCrypto=D.getBrowerCrypto=void 0;function r(){return(Q===null||Q===void 0?void 0:Q.crypto)||(Q===null||Q===void 0?void 0:Q.msCrypto)||{}}D.getBrowerCrypto=r;function e(){const i=r();return i.subtle||i.webkitSubtle}D.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return D.isBrowserCryptoAvailable=t,D}var H={},Zt;function oi(){if(Zt)return H;Zt=1,Object.defineProperty(H,"__esModule",{value:!0}),H.isBrowser=H.isNode=H.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}H.isReactNative=r;function e(){return typeof U<"u"&&typeof U.versions<"u"&&typeof U.versions.node<"u"}H.isNode=e;function t(){return!r()&&!e()}return H.isBrowser=t,H}var er;function ai(){return er||(er=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=ii;e.__exportStar(si(),r),e.__exportStar(oi(),r)})(wt)),wt}var ce=ai();function ci(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function dt(r){return wr(r)}function ui(r){return An(te(r))}const di=ci;function vt(){return((e,t)=>{for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t})()}function fi(r){return r===""||typeof r=="string"&&r.trim()===""}function hi(r){return!(r&&r.length)}function Or(r,e){return kn(r)}function li(r){return typeof r.method<"u"}function oe(r){return typeof r.result<"u"}function ht(r){return typeof r.error<"u"}function tr(r){return typeof r.event<"u"}function pi(r){return pn.includes(r)||r.startsWith("wc_")}function gi(r){return r.method.startsWith("wc_")?!0:!pr.includes(r.method)}function mi(r){r=J(r.toLowerCase());const e=J(qn.keccak_256(Fn(r)));let t="";for(let i=0;i<r.length;i++)parseInt(e[i],16)>7?t+=r[i].toUpperCase():t+=r[i];return te(t)}const bi=r=>r?r.toLowerCase().substring(0,2)!=="0x"?!1:/^(0x)?[0-9a-f]{40}$/i.test(r)?/^(0x)?[0-9a-f]{40}$/.test(r)||/^(0x)?[0-9A-F]{40}$/.test(r)?!0:r===mi(r):!1:!1;function rr(r){return!hi(r)&&!Or(r[0])&&(r[0]=Bn(r[0])),r}function St(r){if(typeof r.type<"u"&&r.type!=="0")return r;if(typeof r.from>"u"||!bi(r.from))throw new Error("Transaction object must include a valid 'from' value.");function e(s){let o=s;return(typeof s=="number"||typeof s=="string"&&!fi(s))&&(Or(s)?typeof s=="string"&&(o=dt(s)):o=vr(s)),typeof o=="string"&&(o=ui(o)),o}const t={from:dt(r.from),to:typeof r.to>"u"?void 0:dt(r.to),gasPrice:typeof r.gasPrice>"u"?"":e(r.gasPrice),gas:typeof r.gas>"u"?typeof r.gasLimit>"u"?"":e(r.gasLimit):e(r.gas),value:typeof r.value>"u"?"":e(r.value),nonce:typeof r.nonce>"u"?"":e(r.nonce),data:typeof r.data>"u"?"":dt(r.data)||"0x"},i=["gasPrice","gas","value","nonce"];return Object.keys(t).forEach(s=>{(typeof t[s]>"u"||typeof t[s]=="string"&&!t[s].trim().length)&&i.includes(s)&&delete t[s]}),t}function yi(r){const e=r.message||"Failed or Rejected Request";let t=-32e3;if(r&&!r.code)switch(e){case"Parse error":t=-32700;break;case"Invalid request":t=-32600;break;case"Method not found":t=-32601;break;case"Invalid params":t=-32602;break;case"Internal error":t=-32603;break;default:t=-32e3;break}const i={code:t,message:e};return r.data&&(i.data=r.data),i}var Ot={},Mt,nr;function _i(){return nr||(nr=1,Mt=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),Mt}var kt,ir;function wi(){if(ir)return kt;ir=1;var r="%[a-f0-9]{2}",e=new RegExp("("+r+")|([^%]+?)","gi"),t=new RegExp("("+r+")+","gi");function i(a,m){try{return[decodeURIComponent(a.join(""))]}catch{}if(a.length===1)return a;m=m||1;var l=a.slice(0,m),g=a.slice(m);return Array.prototype.concat.call([],i(l),i(g))}function s(a){try{return decodeURIComponent(a)}catch{for(var m=a.match(e)||[],l=1;l<m.length;l++)a=i(m,l).join(""),m=a.match(e)||[];return a}}function o(a){for(var m={"%FE%FF":"��","%FF%FE":"��"},l=t.exec(a);l;){try{m[l[0]]=decodeURIComponent(l[0])}catch{var g=s(l[0]);g!==l[0]&&(m[l[0]]=g)}l=t.exec(a)}m["%C2"]="�";for(var M=Object.keys(m),A=0;A<M.length;A++){var R=M[A];a=a.replace(new RegExp(R,"g"),m[R])}return a}return kt=function(a){if(typeof a!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof a+"`");try{return a=a.replace(/\+/g," "),decodeURIComponent(a)}catch{return o(a)}},kt}var Rt,sr;function vi(){return sr||(sr=1,Rt=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];const t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]}),Rt}var or;function Si(){return or||(or=1,(function(r){const e=_i(),t=wi(),i=vi(),s=u=>u==null;function o(u){switch(u.arrayFormat){case"index":return h=>(b,y)=>{const k=b.length;return y===void 0||u.skipNull&&y===null||u.skipEmptyString&&y===""?b:y===null?[...b,[l(h,u),"[",k,"]"].join("")]:[...b,[l(h,u),"[",l(k,u),"]=",l(y,u)].join("")]};case"bracket":return h=>(b,y)=>y===void 0||u.skipNull&&y===null||u.skipEmptyString&&y===""?b:y===null?[...b,[l(h,u),"[]"].join("")]:[...b,[l(h,u),"[]=",l(y,u)].join("")];case"comma":case"separator":return h=>(b,y)=>y==null||y.length===0?b:b.length===0?[[l(h,u),"=",l(y,u)].join("")]:[[b,l(y,u)].join(u.arrayFormatSeparator)];default:return h=>(b,y)=>y===void 0||u.skipNull&&y===null||u.skipEmptyString&&y===""?b:y===null?[...b,l(h,u)]:[...b,[l(h,u),"=",l(y,u)].join("")]}}function a(u){let h;switch(u.arrayFormat){case"index":return(b,y,k)=>{if(h=/\[(\d*)\]$/.exec(b),b=b.replace(/\[\d*\]$/,""),!h){k[b]=y;return}k[b]===void 0&&(k[b]={}),k[b][h[1]]=y};case"bracket":return(b,y,k)=>{if(h=/(\[\])$/.exec(b),b=b.replace(/\[\]$/,""),!h){k[b]=y;return}if(k[b]===void 0){k[b]=[y];return}k[b]=[].concat(k[b],y)};case"comma":case"separator":return(b,y,k)=>{const E=typeof y=="string"&&y.split("").indexOf(u.arrayFormatSeparator)>-1?y.split(u.arrayFormatSeparator).map(W=>g(W,u)):y===null?y:g(y,u);k[b]=E};default:return(b,y,k)=>{if(k[b]===void 0){k[b]=y;return}k[b]=[].concat(k[b],y)}}}function m(u){if(typeof u!="string"||u.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function l(u,h){return h.encode?h.strict?e(u):encodeURIComponent(u):u}function g(u,h){return h.decode?t(u):u}function M(u){return Array.isArray(u)?u.sort():typeof u=="object"?M(Object.keys(u)).sort((h,b)=>Number(h)-Number(b)).map(h=>u[h]):u}function A(u){const h=u.indexOf("#");return h!==-1&&(u=u.slice(0,h)),u}function R(u){let h="";const b=u.indexOf("#");return b!==-1&&(h=u.slice(b)),h}function I(u){u=A(u);const h=u.indexOf("?");return h===-1?"":u.slice(h+1)}function C(u,h){return h.parseNumbers&&!Number.isNaN(Number(u))&&typeof u=="string"&&u.trim()!==""?u=Number(u):h.parseBooleans&&u!==null&&(u.toLowerCase()==="true"||u.toLowerCase()==="false")&&(u=u.toLowerCase()==="true"),u}function j(u,h){h=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},h),m(h.arrayFormatSeparator);const b=a(h),y=Object.create(null);if(typeof u!="string"||(u=u.trim().replace(/^[?#&]/,""),!u))return y;for(const k of u.split("&")){let[F,E]=i(h.decode?k.replace(/\+/g," "):k,"=");E=E===void 0?null:["comma","separator"].includes(h.arrayFormat)?E:g(E,h),b(g(F,h),E,y)}for(const k of Object.keys(y)){const F=y[k];if(typeof F=="object"&&F!==null)for(const E of Object.keys(F))F[E]=C(F[E],h);else y[k]=C(F,h)}return h.sort===!1?y:(h.sort===!0?Object.keys(y).sort():Object.keys(y).sort(h.sort)).reduce((k,F)=>{const E=y[F];return E&&typeof E=="object"&&!Array.isArray(E)?k[F]=M(E):k[F]=E,k},Object.create(null))}r.extract=I,r.parse=j,r.stringify=(u,h)=>{if(!u)return"";h=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},h),m(h.arrayFormatSeparator);const b=E=>h.skipNull&&s(u[E])||h.skipEmptyString&&u[E]==="",y=o(h),k={};for(const E of Object.keys(u))b(E)||(k[E]=u[E]);const F=Object.keys(k);return h.sort!==!1&&F.sort(h.sort),F.map(E=>{const W=u[E];return W===void 0?"":W===null?l(E,h):Array.isArray(W)?W.reduce(y(E),[]).join("&"):l(E,h)+"="+l(W,h)}).filter(E=>E.length>0).join("&")},r.parseUrl=(u,h)=>{h=Object.assign({decode:!0},h);const[b,y]=i(u,"#");return Object.assign({url:b.split("?")[0]||"",query:j(I(u),h)},h&&h.parseFragmentIdentifier&&y?{fragmentIdentifier:g(y,h)}:{})},r.stringifyUrl=(u,h)=>{h=Object.assign({encode:!0,strict:!0},h);const b=A(u.url).split("?")[0]||"",y=r.extract(u.url),k=r.parse(y,{sort:!1}),F=Object.assign(k,u.query);let E=r.stringify(F,h);E&&(E=`?${E}`);let W=R(u.url);return u.fragmentIdentifier&&(W=`#${l(u.fragmentIdentifier,h)}`),`${b}${E}${W}`}})(Ot)),Ot}var Mr=Si();function Oi(r){const e=r.indexOf("?")!==-1?r.indexOf("?"):void 0;return typeof e<"u"?r.substr(e):""}function Mi(r,e){let t=kr(r);return t=Object.assign(Object.assign({},t),e),r=ki(t),r}function kr(r){return Mr.parse(r)}function ki(r){return Mr.stringify(r)}function Ri(r){return typeof r.bridge<"u"}function Ei(r){const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),s=r.substring(e+1,t);function o(A){const I=A.split("@");return{handshakeTopic:I[0],version:parseInt(I[1],10)}}const a=o(s),m=typeof t<"u"?r.substr(t):"";function l(A){const R=kr(A);return{key:R.key||"",bridge:R.bridge||""}}const g=l(m);return Object.assign(Object.assign({protocol:i},a),g)}class Ii{constructor(){this._eventEmitters=[],typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(e,t){this._eventEmitters.push({event:e,callback:t})}trigger(e){let t=[];e&&(t=this._eventEmitters.filter(i=>i.event===e)),t.forEach(i=>{i.callback()})}}const Ai=typeof Dt.WebSocket<"u"?Dt.WebSocket:require("ws");class Ci{constructor(e){if(this.opts=e,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=e.protocol,this._version=e.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=e.subscriptions||[],this._netMonitor=e.netMonitor||new Ii,!e.url||typeof e.url!="string")throw new Error("Missing or invalid WebSocket url");this._url=e.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(e){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(e){}get connecting(){return this.readyState===0}set connected(e){}get connected(){return this.readyState===1}set closing(e){}get closing(){return this.readyState===2}set closed(e){}get closed(){return this.readyState===3}open(){this._socketCreate()}close(){this._socketClose()}send(e,t,i){if(!t||typeof t!="string")throw new Error("Missing or invalid topic field");this._socketSend({topic:t,type:"pub",payload:e,silent:!!i})}subscribe(e){this._socketSend({topic:e,type:"sub",payload:"",silent:!0})}on(e,t){this._events.push({event:e,callback:t})}_socketCreate(){if(this._nextSocket)return;const e=xi(this._url,this._protocol,this._version);if(this._nextSocket=new Ai(e),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=t=>this._socketReceive(t),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=t=>this._socketError(t),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(e){const t=JSON.stringify(e);this._socket&&this._socket.readyState===1?this._socket.send(t):(this._setToQueue(e),this._socketCreate())}async _socketReceive(e){let t;try{t=JSON.parse(e.data)}catch{return}if(this._socketSend({topic:t.topic,type:"ack",payload:"",silent:!0}),this._socket&&this._socket.readyState===1){const i=this._events.filter(s=>s.event==="message");i&&i.length&&i.forEach(s=>s.callback(t))}}_socketError(e){const t=this._events.filter(i=>i.event==="error");t&&t.length&&t.forEach(i=>i.callback(e))}_queueSubscriptions(){this._subscriptions.forEach(t=>this._queue.push({topic:t,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(e){this._queue.push(e)}_pushQueue(){this._queue.forEach(t=>this._socketSend(t)),this._queue=[]}}function xi(r,e,t){var i,s;const a=(r.startsWith("https")?r.replace("https","wss"):r.startsWith("http")?r.replace("http","ws"):r).split("?"),m=on()?{protocol:e,version:t,env:"browser",host:((i=cn())===null||i===void 0?void 0:i.host)||""}:{protocol:e,version:t,env:((s=Bt())===null||s===void 0?void 0:s.name)||""},l=Mi(Oi(a[1]||""),m);return a[0]+"?"+l}const Et="Session currently connected",K="Session currently disconnected",Ti="Session Rejected",Fi="Missing JSON RPC response",Bi='JSON-RPC success response must include "result" field',Ni='JSON-RPC error response must include "error" field',Pi='JSON RPC request must have valid "method" value',qi='JSON RPC request must have valid "id" value',ji="Missing one of the required parameters: bridge / uri / session",ar="JSON RPC response format is invalid",Li="URI format is invalid",Wi="QRCode Modal not provided",cr="User close QRCode Modal";class Ui{constructor(){this._eventEmitters=[]}subscribe(e){this._eventEmitters.push(e)}unsubscribe(e){this._eventEmitters=this._eventEmitters.filter(t=>t.event!==e)}trigger(e){let t=[],i;li(e)?i=e.method:oe(e)||ht(e)?i=`response:${e.id}`:tr(e)?i=e.event:i="",i&&(t=this._eventEmitters.filter(s=>s.event===i)),(!t||!t.length)&&!pi(i)&&!tr(i)&&(t=this._eventEmitters.filter(s=>s.event==="call_request")),t.forEach(s=>{if(ht(e)){const o=new Error(e.error.message);s.callback(o,null)}else s.callback(null,e)})}}class Di{constructor(e="walletconnect"){this.storageId=e}getSession(){let e=null;const t=hr(this.storageId);return t&&Ri(t)&&(e=t),e}setSession(e){return ln(this.storageId,e),e}removeSession(){lr(this.storageId)}}const Hi="walletconnect.org",Vi="abcdefghijklmnopqrstuvwxyz0123456789",Rr=Vi.split("").map(r=>`https://${r}.bridge.walletconnect.org`);function $i(r){let e=r.indexOf("//")>-1?r.split("/")[2]:r.split("/")[0];return e=e.split(":")[0],e=e.split("?")[0],e}function Gi(r){return $i(r).split(".").slice(-2).join(".")}function Ji(){return Math.floor(Math.random()*Rr.length)}function zi(){return Rr[Ji()]}function Ki(r){return Gi(r)===Hi}function Qi(r){return Ki(r)?zi():r}class Xi{constructor(e){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new Ui,this._clientMeta=Jt()||e.connectorOpts.clientMeta||null,this._cryptoLib=e.cryptoLib,this._sessionStorage=e.sessionStorage||new Di(e.connectorOpts.storageId),this._qrcodeModal=e.connectorOpts.qrcodeModal,this._qrcodeModalOptions=e.connectorOpts.qrcodeModalOptions,this._signingMethods=[...pr,...e.connectorOpts.signingMethods||[]],!e.connectorOpts.bridge&&!e.connectorOpts.uri&&!e.connectorOpts.session)throw new Error(ji);e.connectorOpts.bridge&&(this.bridge=Qi(e.connectorOpts.bridge)),e.connectorOpts.uri&&(this.uri=e.connectorOpts.uri);const t=e.connectorOpts.session||this._getStorageSession();t&&(this.session=t),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=e.transport||new Ci({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),e.connectorOpts.uri&&this._subscribeToSessionRequest(),e.pushServerOpts&&this._registerPushServer(e.pushServerOpts)}set bridge(e){e&&(this._bridge=e)}get bridge(){return this._bridge}set key(e){if(!e)return;const t=Nn(e);this._key=t}get key(){return this._key?xn(this._key):""}set clientId(e){e&&(this._clientId=e)}get clientId(){let e=this._clientId;return e||(e=this._clientId=vt()),this._clientId}set peerId(e){e&&(this._peerId=e)}get peerId(){return this._peerId}set clientMeta(e){}get clientMeta(){let e=this._clientMeta;return e||(e=this._clientMeta=Jt()),e}set peerMeta(e){this._peerMeta=e}get peerMeta(){return this._peerMeta}set handshakeTopic(e){e&&(this._handshakeTopic=e)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(e){e&&(this._handshakeId=e)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(e){if(!e)return;const{handshakeTopic:t,bridge:i,key:s}=this._parseUri(e);this.handshakeTopic=t,this.bridge=i,this.key=s}set chainId(e){this._chainId=e}get chainId(){return this._chainId}set networkId(e){this._networkId=e}get networkId(){return this._networkId}set accounts(e){this._accounts=e}get accounts(){return this._accounts}set rpcUrl(e){this._rpcUrl=e}get rpcUrl(){return this._rpcUrl}set connected(e){}get connected(){return this._connected}set pending(e){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(e){e&&(this._connected=e.connected,this.accounts=e.accounts,this.chainId=e.chainId,this.bridge=e.bridge,this.key=e.key,this.clientId=e.clientId,this.clientMeta=e.clientMeta,this.peerId=e.peerId,this.peerMeta=e.peerMeta,this.handshakeId=e.handshakeId,this.handshakeTopic=e.handshakeTopic)}on(e,t){const i={event:e,callback:t};this._eventManager.subscribe(i)}off(e){this._eventManager.unsubscribe(e)}async createInstantRequest(e){this._key=await this._generateKey();const t=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(e)}]});this.handshakeId=t.id,this.handshakeTopic=vt(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",()=>{throw new Error(cr)});const i=()=>{this.killSession()};try{const s=await this._sendCallRequest(t);return s&&i(),s}catch(s){throw i(),s}}async connect(e){if(!this._qrcodeModal)throw new Error(Wi);return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(e),new Promise(async(t,i)=>{this.on("modal_closed",()=>i(new Error(cr))),this.on("connect",(s,o)=>{if(s)return i(s);t(o.params[0])})}))}async createSession(e){if(this._connected)throw new Error(Et);if(this.pending)return;this._key=await this._generateKey();const t=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:e&&e.chainId?e.chainId:null}]});this.handshakeId=t.id,this.handshakeTopic=vt(),this._sendSessionRequest(t,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(e){if(this._connected)throw new Error(Et);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const t={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},i={id:this.handshakeId,jsonrpc:"2.0",result:t};this._sendResponse(i),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(e){if(this._connected)throw new Error(Et);const t=e&&e.message?e.message:Ti,i=this._formatResponse({id:this.handshakeId,error:{message:t}});this._sendResponse(i),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:t}]}),this._removeStorageSession()}updateSession(e){if(!this._connected)throw new Error(K);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const t={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},i=this._formatRequest({method:"wc_sessionUpdate",params:[t]});this._sendSessionRequest(i,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(e){const t=e?e.message:"Session Disconnected",i={approved:!1,chainId:null,networkId:null,accounts:null},s=this._formatRequest({method:"wc_sessionUpdate",params:[i]});await this._sendRequest(s),this._handleSessionDisconnect(t)}async sendTransaction(e){if(!this._connected)throw new Error(K);const t=St(e),i=this._formatRequest({method:"eth_sendTransaction",params:[t]});return await this._sendCallRequest(i)}async signTransaction(e){if(!this._connected)throw new Error(K);const t=St(e),i=this._formatRequest({method:"eth_signTransaction",params:[t]});return await this._sendCallRequest(i)}async signMessage(e){if(!this._connected)throw new Error(K);const t=this._formatRequest({method:"eth_sign",params:e});return await this._sendCallRequest(t)}async signPersonalMessage(e){if(!this._connected)throw new Error(K);e=rr(e);const t=this._formatRequest({method:"personal_sign",params:e});return await this._sendCallRequest(t)}async signTypedData(e){if(!this._connected)throw new Error(K);const t=this._formatRequest({method:"eth_signTypedData",params:e});return await this._sendCallRequest(t)}async updateChain(e){if(!this._connected)throw new Error("Session currently disconnected");const t=this._formatRequest({method:"wallet_updateChain",params:[e]});return await this._sendCallRequest(t)}unsafeSend(e,t){return this._sendRequest(e,t),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:t}]}),new Promise((i,s)=>{this._subscribeToResponse(e.id,(o,a)=>{if(o){s(o);return}if(!a)throw new Error(Fi);i(a)})})}async sendCustomRequest(e,t){if(!this._connected)throw new Error(K);switch(e.method){case"eth_accounts":return this.accounts;case"eth_chainId":return vr(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":e.params&&(e.params[0]=St(e.params[0]));break;case"personal_sign":e.params&&(e.params=rr(e.params));break}const i=this._formatRequest(e);return await this._sendCallRequest(i,t)}approveRequest(e){if(oe(e)){const t=this._formatResponse(e);this._sendResponse(t)}else throw new Error(Bi)}rejectRequest(e){if(ht(e)){const t=this._formatResponse(e);this._sendResponse(t)}else throw new Error(Ni)}transportClose(){this._transport.close()}async _sendRequest(e,t){const i=this._formatRequest(e),s=await this._encrypt(i),o=typeof(t==null?void 0:t.topic)<"u"?t.topic:this.peerId,a=JSON.stringify(s),m=typeof(t==null?void 0:t.forcePushNotification)<"u"?!t.forcePushNotification:gi(i);this._transport.send(a,o,m)}async _sendResponse(e){const t=await this._encrypt(e),i=this.peerId,s=JSON.stringify(t);this._transport.send(s,i,!0)}async _sendSessionRequest(e,t,i){this._sendRequest(e,i),this._subscribeToSessionResponse(e.id,t)}_sendCallRequest(e,t){return this._sendRequest(e,t),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:t}]}),this._subscribeToCallResponse(e.id)}_formatRequest(e){if(typeof e.method>"u")throw new Error(Pi);return{id:typeof e.id>"u"?di():e.id,jsonrpc:"2.0",method:e.method,params:typeof e.params>"u"?[]:e.params}}_formatResponse(e){if(typeof e.id>"u")throw new Error(qi);const t={id:e.id,jsonrpc:"2.0"};if(ht(e)){const i=yi(e.error);return Object.assign(Object.assign(Object.assign({},t),e),{error:i})}else if(oe(e))return Object.assign(Object.assign({},t),e);throw new Error(ar)}_handleSessionDisconnect(e){const t=e||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),lr(zt)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:t}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(e,t){t?t.approved?(this._connected?(t.chainId&&(this.chainId=t.chainId),t.accounts&&(this.accounts=t.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,t.chainId&&(this.chainId=t.chainId),t.accounts&&(this.accounts=t.accounts),t.peerId&&!this.peerId&&(this.peerId=t.peerId),t.peerMeta&&!this.peerMeta&&(this.peerMeta=t.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(e):this._handleSessionDisconnect(e)}async _handleIncomingMessages(e){if(![this.clientId,this.handshakeTopic].includes(e.topic))return;let i;try{i=JSON.parse(e.payload)}catch{return}const s=await this._decrypt(i);s&&this._eventManager.trigger(s)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(e,t){this.on(`response:${e}`,t)}_subscribeToSessionResponse(e,t){this._subscribeToResponse(e,(i,s)=>{if(i){this._handleSessionResponse(i.message);return}oe(s)?this._handleSessionResponse(t,s.result):s.error&&s.error.message?this._handleSessionResponse(s.error.message):this._handleSessionResponse(t)})}_subscribeToCallResponse(e){return new Promise((t,i)=>{this._subscribeToResponse(e,(s,o)=>{if(s){i(s);return}oe(o)?t(o.result):o.error&&o.error.message?i(o.error):i(new Error(ar))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(e,t)=>{const{request:i}=t.params[0];if(nn()&&this._signingMethods.includes(i.method)){const s=hr(zt);s&&(window.location.href=s.href)}}),this.on("wc_sessionRequest",(e,t)=>{e&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:e.toString()}]}),this.handshakeId=t.id,this.peerId=t.params[0].peerId,this.peerMeta=t.params[0].peerMeta;const i=Object.assign(Object.assign({},t),{method:"session_request"});this._eventManager.trigger(i)}),this.on("wc_sessionUpdate",(e,t)=>{e&&this._handleSessionResponse(e.message),this._handleSessionResponse("Session disconnected",t.params[0])})}_initTransport(){this._transport.on("message",e=>this._handleIncomingMessages(e)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){const e=this.protocol,t=this.handshakeTopic,i=this.version,s=encodeURIComponent(this.bridge),o=this.key;return`${e}:${t}@${i}?bridge=${s}&key=${o}`}_parseUri(e){const t=Ei(e);if(t.protocol===this.protocol){if(!t.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const i=t.handshakeTopic;if(!t.bridge)throw Error("Invalid or missing bridge url parameter value");const s=decodeURIComponent(t.bridge);if(!t.key)throw Error("Invalid or missing key parameter value");const o=t.key;return{handshakeTopic:i,bridge:s,key:o}}else throw new Error(Li)}async _generateKey(){return this._cryptoLib?await this._cryptoLib.generateKey():null}async _encrypt(e){const t=this._key;return this._cryptoLib&&t?await this._cryptoLib.encrypt(e,t):null}async _decrypt(e){const t=this._key;return this._cryptoLib&&t?await this._cryptoLib.decrypt(e,t):null}_getStorageSession(){let e=null;return this._sessionStorage&&(e=this._sessionStorage.getSession()),e}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(e){if(!e.url||typeof e.url!="string")throw Error("Invalid or missing pushServerOpts.url parameter value");if(!e.type||typeof e.type!="string")throw Error("Invalid or missing pushServerOpts.type parameter value");if(!e.token||typeof e.token!="string")throw Error("Invalid or missing pushServerOpts.token parameter value");const t={bridge:this.bridge,topic:this.clientId,type:e.type,token:e.token,peerName:"",language:e.language||""};this.on("connect",async(i,s)=>{if(i)throw i;if(e.peerMeta){const o=s.params[0].peerMeta.name;t.peerName=o}try{if(!(await(await fetch(`${e.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})).json()).success)throw Error("Failed to register in Push Server")}catch{throw Error("Failed to register in Push Server")}})}}function Yi(r){return ce.getBrowerCrypto().getRandomValues(new Uint8Array(r))}const Er=256,Ir=Er,Zi=Er,z="AES-CBC",es=`SHA-${Ir}`,Tt="HMAC",ts="encrypt",rs="decrypt",ns="sign",is="verify";function ss(r){return r===z?{length:Ir,name:z}:{hash:{name:es},name:Tt}}function os(r){return r===z?[ts,rs]:[ns,is]}async function jt(r,e=z){return ce.getSubtleCrypto().importKey("raw",r,ss(e),!0,os(e))}async function as(r,e,t){const i=ce.getSubtleCrypto(),s=await jt(e,z),o=await i.encrypt({iv:r,name:z},s,t);return new Uint8Array(o)}async function cs(r,e,t){const i=ce.getSubtleCrypto(),s=await jt(e,z),o=await i.decrypt({iv:r,name:z},s,t);return new Uint8Array(o)}async function us(r,e){const t=ce.getSubtleCrypto(),i=await jt(r,Tt),s=await t.sign({length:Zi,name:Tt},i,e);return new Uint8Array(s)}function ds(r,e,t){return as(r,e,t)}function fs(r,e,t){return cs(r,e,t)}async function Ar(r,e){return await us(r,e)}async function Cr(r){const e=(r||256)/8,t=Yi(e);return Tn(pt(t))}async function xr(r,e){const t=Z(r.data),i=Z(r.iv),s=Z(r.hmac),o=Y(s,!1),a=_r(t,i),m=await Ar(e,a),l=Y(m,!1);return J(o)===J(l)}async function hs(r,e,t){const i=ee(It(e)),s=t||await Cr(128),o=ee(It(s)),a=Y(o,!1),m=JSON.stringify(r),l=On(m),g=await ds(o,i,l),M=Y(g,!1),A=_r(g,o),R=await Ar(i,A),I=Y(R,!1);return{data:M,hmac:I,iv:a}}async function ls(r,e){const t=ee(It(e));if(!t)throw new Error("Missing key: required for decryption");if(!await xr(r,t))return null;const s=Z(r.data),o=Z(r.iv),a=await fs(o,t,s),m=vn(a);let l;try{l=JSON.parse(m)}catch{return null}return l}const ps=Object.freeze(Object.defineProperty({__proto__:null,decrypt:ls,encrypt:hs,generateKey:Cr,verifyHmac:xr},Symbol.toStringTag,{value:"Module"}));class vs extends Xi{constructor(e,t){super({cryptoLib:ps,connectorOpts:e,pushServerOpts:t})}}const gs={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Tr={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},N={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},L={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},G={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class c{static getFirstMatch(e,t){const i=t.match(e);return i&&i.length>0&&i[1]||""}static getSecondMatch(e,t){const i=t.match(e);return i&&i.length>1&&i[2]||""}static matchAndReturnConst(e,t,i){if(e.test(t))return i}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(i=>parseInt(i,10)||0);if(t.push(0),t[0]===10)switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(i=>parseInt(i,10)||0);if(t.push(0),!(t[0]===1&&t[1]<5)){if(t[0]===1&&t[1]<6)return"Cupcake";if(t[0]===1&&t[1]>=6)return"Donut";if(t[0]===2&&t[1]<2)return"Eclair";if(t[0]===2&&t[1]===2)return"Froyo";if(t[0]===2&&t[1]>2)return"Gingerbread";if(t[0]===3)return"Honeycomb";if(t[0]===4&&t[1]<1)return"Ice Cream Sandwich";if(t[0]===4&&t[1]<4)return"Jelly Bean";if(t[0]===4&&t[1]>=4)return"KitKat";if(t[0]===5)return"Lollipop";if(t[0]===6)return"Marshmallow";if(t[0]===7)return"Nougat";if(t[0]===8)return"Oreo";if(t[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,i=!1){const s=c.getVersionPrecision(e),o=c.getVersionPrecision(t);let a=Math.max(s,o),m=0;const l=c.map([e,t],g=>{const M=a-c.getVersionPrecision(g),A=g+new Array(M+1).join(".0");return c.map(A.split("."),R=>new Array(20-R.length).join("0")+R).reverse()});for(i&&(m=a-Math.min(s,o)),a-=1;a>=m;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(a===m)return 0;a-=1}else if(l[0][a]<l[1][a])return-1}}static map(e,t){const i=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(s=0;s<e.length;s+=1)i.push(t(e[s]));return i}static find(e,t){let i,s;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(i=0,s=e.length;i<s;i+=1){const o=e[i];if(t(o,i))return o}}static assign(e,...t){const i=e;let s,o;if(Object.assign)return Object.assign(e,...t);for(s=0,o=t.length;s<o;s+=1){const a=t[s];typeof a=="object"&&a!==null&&Object.keys(a).forEach(l=>{i[l]=a[l]})}return e}static getBrowserAlias(e){return gs[e]}static getBrowserTypeByAlias(e){return Tr[e]||""}}const T=/version\/(\d+(\.?_?\d+)+)/i,ms=[{test:[/googlebot/i],describe(r){const e={name:"Googlebot"},t=c.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,r)||c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/opera/i],describe(r){const e={name:"Opera"},t=c.getFirstMatch(T,r)||c.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/opr\/|opios/i],describe(r){const e={name:"Opera"},t=c.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,r)||c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/SamsungBrowser/i],describe(r){const e={name:"Samsung Internet for Android"},t=c.getFirstMatch(T,r)||c.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/Whale/i],describe(r){const e={name:"NAVER Whale Browser"},t=c.getFirstMatch(T,r)||c.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/MZBrowser/i],describe(r){const e={name:"MZ Browser"},t=c.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,r)||c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/focus/i],describe(r){const e={name:"Focus"},t=c.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,r)||c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/swing/i],describe(r){const e={name:"Swing"},t=c.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,r)||c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/coast/i],describe(r){const e={name:"Opera Coast"},t=c.getFirstMatch(T,r)||c.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(r){const e={name:"Opera Touch"},t=c.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,r)||c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/yabrowser/i],describe(r){const e={name:"Yandex Browser"},t=c.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,r)||c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/ucbrowser/i],describe(r){const e={name:"UC Browser"},t=c.getFirstMatch(T,r)||c.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/Maxthon|mxios/i],describe(r){const e={name:"Maxthon"},t=c.getFirstMatch(T,r)||c.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/epiphany/i],describe(r){const e={name:"Epiphany"},t=c.getFirstMatch(T,r)||c.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/puffin/i],describe(r){const e={name:"Puffin"},t=c.getFirstMatch(T,r)||c.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/sleipnir/i],describe(r){const e={name:"Sleipnir"},t=c.getFirstMatch(T,r)||c.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/k-meleon/i],describe(r){const e={name:"K-Meleon"},t=c.getFirstMatch(T,r)||c.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/micromessenger/i],describe(r){const e={name:"WeChat"},t=c.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,r)||c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/qqbrowser/i],describe(r){const e={name:/qqbrowserlite/i.test(r)?"QQ Browser Lite":"QQ Browser"},t=c.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,r)||c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/msie|trident/i],describe(r){const e={name:"Internet Explorer"},t=c.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/\sedg\//i],describe(r){const e={name:"Microsoft Edge"},t=c.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/edg([ea]|ios)/i],describe(r){const e={name:"Microsoft Edge"},t=c.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/vivaldi/i],describe(r){const e={name:"Vivaldi"},t=c.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/seamonkey/i],describe(r){const e={name:"SeaMonkey"},t=c.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/sailfish/i],describe(r){const e={name:"Sailfish"},t=c.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,r);return t&&(e.version=t),e}},{test:[/silk/i],describe(r){const e={name:"Amazon Silk"},t=c.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/phantom/i],describe(r){const e={name:"PhantomJS"},t=c.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/slimerjs/i],describe(r){const e={name:"SlimerJS"},t=c.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const e={name:"BlackBerry"},t=c.getFirstMatch(T,r)||c.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/(web|hpw)[o0]s/i],describe(r){const e={name:"WebOS Browser"},t=c.getFirstMatch(T,r)||c.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/bada/i],describe(r){const e={name:"Bada"},t=c.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/tizen/i],describe(r){const e={name:"Tizen"},t=c.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,r)||c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/qupzilla/i],describe(r){const e={name:"QupZilla"},t=c.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,r)||c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/firefox|iceweasel|fxios/i],describe(r){const e={name:"Firefox"},t=c.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/electron/i],describe(r){const e={name:"Electron"},t=c.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/MiuiBrowser/i],describe(r){const e={name:"Miui"},t=c.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/chromium/i],describe(r){const e={name:"Chromium"},t=c.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,r)||c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/chrome|crios|crmo/i],describe(r){const e={name:"Chrome"},t=c.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/GSA/i],describe(r){const e={name:"Google Search"},t=c.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){const e=!r.test(/like android/i),t=r.test(/android/i);return e&&t},describe(r){const e={name:"Android Browser"},t=c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/playstation 4/i],describe(r){const e={name:"PlayStation 4"},t=c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/safari|applewebkit/i],describe(r){const e={name:"Safari"},t=c.getFirstMatch(T,r);return t&&(e.version=t),e}},{test:[/.*/i],describe(r){const e=/^(.*)\/(.*) /,t=/^(.*)\/(.*)[ \t]\((.*)/,s=r.search("\\(")!==-1?t:e;return{name:c.getFirstMatch(s,r),version:c.getSecondMatch(s,r)}}}],bs=[{test:[/Roku\/DVP/],describe(r){const e=c.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,r);return{name:L.Roku,version:e}}},{test:[/windows phone/i],describe(r){const e=c.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,r);return{name:L.WindowsPhone,version:e}}},{test:[/windows /i],describe(r){const e=c.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,r),t=c.getWindowsVersionName(e);return{name:L.Windows,version:e,versionName:t}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(r){const e={name:L.iOS},t=c.getSecondMatch(/(Version\/)(\d[\d.]+)/,r);return t&&(e.version=t),e}},{test:[/macintosh/i],describe(r){const e=c.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,r).replace(/[_\s]/g,"."),t=c.getMacOSVersionName(e),i={name:L.MacOS,version:e};return t&&(i.versionName=t),i}},{test:[/(ipod|iphone|ipad)/i],describe(r){const e=c.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,r).replace(/[_\s]/g,".");return{name:L.iOS,version:e}}},{test(r){const e=!r.test(/like android/i),t=r.test(/android/i);return e&&t},describe(r){const e=c.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,r),t=c.getAndroidVersionName(e),i={name:L.Android,version:e};return t&&(i.versionName=t),i}},{test:[/(web|hpw)[o0]s/i],describe(r){const e=c.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,r),t={name:L.WebOS};return e&&e.length&&(t.version=e),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const e=c.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,r)||c.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,r)||c.getFirstMatch(/\bbb(\d+)/i,r);return{name:L.BlackBerry,version:e}}},{test:[/bada/i],describe(r){const e=c.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,r);return{name:L.Bada,version:e}}},{test:[/tizen/i],describe(r){const e=c.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,r);return{name:L.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:L.Linux}}},{test:[/CrOS/],describe(){return{name:L.ChromeOS}}},{test:[/PlayStation 4/],describe(r){const e=c.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,r);return{name:L.PlayStation4,version:e}}}],ys=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(r){const e=c.getFirstMatch(/(can-l01)/i,r)&&"Nova",t={type:N.mobile,vendor:"Huawei"};return e&&(t.model=e),t}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:N.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:N.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:N.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:N.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:N.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:N.tablet}}},{test(r){const e=r.test(/ipod|iphone/i),t=r.test(/like (ipod|iphone)/i);return e&&!t},describe(r){const e=c.getFirstMatch(/(ipod|iphone)/i,r);return{type:N.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:N.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:N.mobile}}},{test(r){return r.getBrowserName(!0)==="blackberry"},describe(){return{type:N.mobile,vendor:"BlackBerry"}}},{test(r){return r.getBrowserName(!0)==="bada"},describe(){return{type:N.mobile}}},{test(r){return r.getBrowserName()==="windows phone"},describe(){return{type:N.mobile,vendor:"Microsoft"}}},{test(r){const e=Number(String(r.getOSVersion()).split(".")[0]);return r.getOSName(!0)==="android"&&e>=3},describe(){return{type:N.tablet}}},{test(r){return r.getOSName(!0)==="android"},describe(){return{type:N.mobile}}},{test(r){return r.getOSName(!0)==="macos"},describe(){return{type:N.desktop,vendor:"Apple"}}},{test(r){return r.getOSName(!0)==="windows"},describe(){return{type:N.desktop}}},{test(r){return r.getOSName(!0)==="linux"},describe(){return{type:N.desktop}}},{test(r){return r.getOSName(!0)==="playstation 4"},describe(){return{type:N.tv}}},{test(r){return r.getOSName(!0)==="roku"},describe(){return{type:N.tv}}}],_s=[{test(r){return r.getBrowserName(!0)==="microsoft edge"},describe(r){if(/\sedg\//i.test(r))return{name:G.Blink};const t=c.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,r);return{name:G.EdgeHTML,version:t}}},{test:[/trident/i],describe(r){const e={name:G.Trident},t=c.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){return r.test(/presto/i)},describe(r){const e={name:G.Presto},t=c.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){const e=r.test(/gecko/i),t=r.test(/like gecko/i);return e&&!t},describe(r){const e={name:G.Gecko},t=c.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:G.Blink}}},{test:[/(apple)?webkit/i],describe(r){const e={name:G.WebKit},t=c.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}}];class ur{constructor(e,t=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},t!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=c.find(ms,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=c.find(bs,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=c.find(ys,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=c.find(_s,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return c.assign({},this.parsedResult)}satisfies(e){const t={};let i=0;const s={};let o=0;if(Object.keys(e).forEach(m=>{const l=e[m];typeof l=="string"?(s[m]=l,o+=1):typeof l=="object"&&(t[m]=l,i+=1)}),i>0){const m=Object.keys(t),l=c.find(m,M=>this.isOS(M));if(l){const M=this.satisfies(t[l]);if(M!==void 0)return M}const g=c.find(m,M=>this.isPlatform(M));if(g){const M=this.satisfies(t[g]);if(M!==void 0)return M}}if(o>0){const m=Object.keys(s),l=c.find(m,g=>this.isBrowser(g,!0));if(l!==void 0)return this.compareVersion(s[l])}}isBrowser(e,t=!1){const i=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const o=c.getBrowserTypeByAlias(s);return t&&o&&(s=o.toLowerCase()),s===i}compareVersion(e){let t=[0],i=e,s=!1;const o=this.getBrowserVersion();if(typeof o=="string")return e[0]===">"||e[0]==="<"?(i=e.substr(1),e[1]==="="?(s=!0,i=e.substr(2)):t=[],e[0]===">"?t.push(1):t.push(-1)):e[0]==="="?i=e.substr(1):e[0]==="~"&&(s=!0,i=e.substr(1)),t.indexOf(c.compareVersions(o,i,s))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(t=>this.is(t))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Ss{static getParser(e,t=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new ur(e,t)}static parse(e){return new ur(e).getResult()}static get BROWSER_MAP(){return Tr}static get ENGINE_MAP(){return G}static get OS_MAP(){return L}static get PLATFORMS_MAP(){return N}}export{Ss as B,vs as W};
