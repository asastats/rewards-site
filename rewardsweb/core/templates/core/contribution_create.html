{% extends "core/base_form.html" %}

{% block title %}
<title>Add Contribution - {{ PROJECT_NAME }}</title>
{% endblock %}

{% block page_title %}Add New Contribution{% endblock %}
{% block page_subtitle %}Create a new contribution record{% endblock %}

{% block header_badge_content %}
<i class="fas fa-plus mr-1"></i> New
{% endblock %}

{% block form_title %}New Contribution{% endblock %}

{% block form_fields %}
  <input type="hidden" name="q" value="{{ request.GET.q }}">

  {% include "includes/form_field.html" with field=form.contributor icon="user" %}
  {% include "includes/form_field.html" with field=form.cycle icon="sync-alt" %}
  {% include "includes/form_field.html" with field=form.platform icon="plug" %}
  {% include "includes/form_field.html" with field=form.reward icon="award" %}
  {% include "includes/form_field.html" with field=form.percentage icon="percentage" help_text="Enter a value between 0 and 1 (e.g., 0.5 for 50%)" %}
  {% include "includes/form_field.html" with field=form.comment icon="comment" %}

  {% if not form.preselected_issue %}
  <div class="form-control">
    <div class="flex items-center gap-2 mb-4">
      <i class="fab fa-ticket-alt text-base-content"></i>
      <label class="label-text font-semibold text-lg">{{ ISSUE_TRACKER }} Issue</label>
    </div>

    <div class="p-6 rounded-xl border-2 border-base-300">
      <div class="mb-4">
        <label class="label py-0 mb-2">Issue Number</label>
        <div class="p-1 rounded-lg border border-base-300">
          {{ form.issue_number }}
        </div>
      </div>

      <div>
        <label class="label py-0 mb-2">Issue Status</label>
        <div class="flex gap-2 p-1 rounded-lg items-stretch border border-base-300">
          {% for radio in form.issue_status %}
          <label class="flex items-center space-x-3 cursor-pointer hover:bg-base-200 px-4 py-3 rounded transition-colors duration-200 flex-1 justify-center">
            {{ radio.tag }}
            <span class="label-text font-medium text-sm whitespace-nowrap">{{ radio.choice_label }}</span>
          </label>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
  {% endif %}
{% endblock %}

{% block form_actions %}
  {% include "includes/action_buttons.html" with cancel_url='index' submit_text="Create Contribution" %}
{% endblock %}