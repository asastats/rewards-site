<!-- templates/contribution_edit.html -->
{% extends "base_generic.html" %}

{% block content %}
<div class="max-w-2xl mx-auto">
  <div class="card bg-base-100 shadow-xl">
    <div class="card-body">
      <h1 class="card-title text-2xl font-bold mb-6">Edit Contribution</h1>
      
      <div class="bg-base-200 p-4 rounded-lg mb-6">
        <h2 class="font-semibold mb-2">Contribution Details:</h2>
        <p><strong>Contributor:</strong> {{ object.contributor }}</p>
        <p><strong>Cycle:</strong> {{ object.cycle }}</p>
        <p><strong>Platform:</strong> {{ object.platform }}</p>
        <p><strong>URL:</strong> <a href="{{ object.url }}" class="link link-accent" target="_blank">{{ object.url|truncatechars:50 }}</a></p>
      </div>

      <form method="post">
        {% csrf_token %}
        
        {% if form.non_field_errors %}
        <div class="alert alert-error mb-4">
          {{ form.non_field_errors }}
        </div>
        {% endif %}

        <!-- Reward Field -->
        <div class="form-control mb-4">
          <label class="label" for="{{ form.reward.id_for_label }}">
            <span class="label-text font-semibold">Reward Type</span>
          </label>
          {{ form.reward }}
          {% if form.reward.errors %}
          <div class="text-error text-sm mt-1">
            {{ form.reward.errors }}
          </div>
          {% endif %}
        </div>

        <!-- Percentage Field -->
        <div class="form-control mb-4">
          <label class="label" for="{{ form.percentage.id_for_label }}">
            <span class="label-text font-semibold">Percentage (%)</span>
          </label>
          {{ form.percentage }}
          {% if form.percentage.errors %}
          <div class="text-error text-sm mt-1">
            {{ form.percentage.errors }}
          </div>
          {% endif %}
          <div class="text-sm text-base-content/70 mt-1">
            Enter percentage as a decimal (e.g., 0.50 for 50%)
          </div>
        </div>

        <!-- Comment Field -->
        <div class="form-control mb-6">
          <label class="label" for="{{ form.comment.id_for_label }}">
            <span class="label-text font-semibold">Comment</span>
          </label>
          {{ form.comment }}
          {% if form.comment.errors %}
          <div class="text-error text-sm mt-1">
            {{ form.comment.errors }}
          </div>
          {% endif %}
        </div>

        <!-- Form Actions -->
        <div class="flex gap-4">
          <button type="submit" class="btn btn-primary flex-1">
            Update Contribution
          </button>
          <a href="{% url 'contribution-detail' object.pk %}" class="btn btn-outline flex-1">
            Cancel
          </a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}